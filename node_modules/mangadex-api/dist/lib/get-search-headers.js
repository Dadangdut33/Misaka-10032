"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSearchHeaders = void 0;
const getSearchHeaders = (query, cookie) => {
    const headers = {};
    if (typeof query !== 'string' &&
        typeof query.with_hentai === 'boolean' &&
        query.with_hentai) {
        if (cookie.includes('mangadex_h_toggle=0')) {
            const cookieWithCorrectHSetting = cookie
                .split('; ')
                .filter((l) => !l.includes('mangadex_h_toggle'))
                .join('; ');
            headers.Cookie = `${cookieWithCorrectHSetting}; mangadex_h_toggle=1`;
        }
    }
    else if (typeof query !== 'string' &&
        typeof query.with_hentai === 'boolean' &&
        !query.with_hentai) {
        if (['mangadex_h_toggle=1', 'mangadex_h_toggle=2'].some((hMode) => cookie.includes(hMode))) {
            const cookieWithCorrectHSetting = cookie
                .split('; ')
                .filter((l) => !l.includes('mangadex_h_toggle'))
                .join('; ');
            headers.Cookie = `${cookieWithCorrectHSetting}; mangadex_h_toggle=0`;
        }
    }
    return headers;
};
exports.getSearchHeaders = getSearchHeaders;
